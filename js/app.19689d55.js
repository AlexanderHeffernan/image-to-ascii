(function(){"use strict";var e={963:function(e,t,n){var a=n(5130),o=n(6768);const r={class:"app-content"},l={class:"router-links"};function u(e,t){const n=(0,o.g2)("router-link"),a=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("nav",null,[t[2]||(t[2]=(0,o.Lk)("h1",{style:{padding:"0px !important"}},"PixCha",-1)),(0,o.Lk)("div",l,[(0,o.bF)(n,{class:"router-link",to:"/"},{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.eW)("Home")]))),_:1,__:[0]}),(0,o.bF)(n,{class:"router-link",to:"/converter"},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)("Converter")]))),_:1,__:[1]})])]),(0,o.bF)(a)])}var i=n(1241);const s={},c=(0,i.A)(s,[["render",u]]);var p=c,v=n(1387);const d={class:"home"};function h(e,t){return(0,o.uX)(),(0,o.CE)("div",d,t[0]||(t[0]=[(0,o.Lk)("h1",null,"About the Tool",-1)]))}const f={},m=(0,i.A)(f,[["render",h]]);var g=m,b=(n(4114),n(8111),n(1701),n(4232)),k=n(144);const L={class:"settings"};var w=(0,o.pM)({__name:"SettingsDrawer",props:["width","height"],emits:["update:char-set","update:width","update:height","update:aspect-lock","update:is-colour","update:brightness","update:contrast","update:aspect-ratio-correction"],setup(e){const t=e,n=(0,k.KR)("standard"),r=(0,k.KR)(t.width),l=(0,k.KR)(t.height),u=(0,k.KR)(!1),i=(0,k.KR)(1),s=(0,k.KR)(1),c=(0,k.KR)(!0),p=(0,k.KR)(.55);return(0,o.wB)((()=>t.width),(e=>{r.value=e})),(0,o.wB)((()=>t.height),(e=>{l.value=e})),(e,t)=>((0,o.uX)(),(0,o.CE)("div",L,[t[17]||(t[17]=(0,o.Lk)("h2",null,"Settings",-1)),t[18]||(t[18]=(0,o.eW)()),t[19]||(t[19]=(0,o.Lk)("br",null,null,-1)),t[20]||(t[20]=(0,o.Lk)("label",{for:"charSet"},"Character Set: ",-1)),(0,o.bo)((0,o.Lk)("select",{id:"charSet","onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),onChange:t[1]||(t[1]=t=>e.$emit("update:char-set",n.value))},t[16]||(t[16]=[(0,o.Lk)("option",{value:"standard"},"Standard",-1),(0,o.Lk)("option",{value:"simple"},"Simple",-1),(0,o.Lk)("option",{value:"complex"},"Complex",-1)]),544),[[a.u1,n.value]]),t[21]||(t[21]=(0,o.Lk)("br",null,null,-1)),t[22]||(t[22]=(0,o.Lk)("label",{for:"colourCheck"},"Colour: ",-1)),(0,o.bo)((0,o.Lk)("input",{type:"checkbox",id:"colourCheck","onUpdate:modelValue":t[2]||(t[2]=e=>u.value=e),onChange:t[3]||(t[3]=t=>e.$emit("update:is-colour",u.value))},null,544),[[a.lH,u.value]]),t[23]||(t[23]=(0,o.Lk)("label",{for:"brightness"},"Brightness: ",-1)),(0,o.bo)((0,o.Lk)("input",{type:"range",id:"brightness","onUpdate:modelValue":t[4]||(t[4]=e=>i.value=e),min:"0.1",max:"3",step:"0.1",onChange:t[5]||(t[5]=t=>e.$emit("update:brightness",i.value))},null,544),[[a.Jo,i.value,void 0,{number:!0}]]),(0,o.Lk)("span",null,(0,b.v_)(i.value),1),t[24]||(t[24]=(0,o.Lk)("label",{for:"contrast"},"Contrast: ",-1)),(0,o.bo)((0,o.Lk)("input",{type:"range",id:"contrast","onUpdate:modelValue":t[6]||(t[6]=e=>s.value=e),min:"0.1",max:"3",step:"0.1",onChange:t[7]||(t[7]=t=>e.$emit("update:contrast",s.value))},null,544),[[a.Jo,s.value,void 0,{number:!0}]]),(0,o.Lk)("span",null,(0,b.v_)(s.value),1),t[25]||(t[25]=(0,o.Lk)("br",null,null,-1)),t[26]||(t[26]=(0,o.Lk)("label",{for:"width"},"Width (10-500):",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",id:"width","onUpdate:modelValue":t[8]||(t[8]=e=>r.value=e),min:"10",max:"500",onChange:t[9]||(t[9]=t=>e.$emit("update:width",r.value))},null,544),[[a.Jo,r.value,void 0,{number:!0}]]),t[27]||(t[27]=(0,o.Lk)("label",{for:"height"},"Height (10-500):",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",id:"height","onUpdate:modelValue":t[10]||(t[10]=e=>l.value=e),min:"10",max:"500",onChange:t[11]||(t[11]=t=>e.$emit("update:height",l.value))},null,544),[[a.Jo,l.value,void 0,{number:!0}]]),t[28]||(t[28]=(0,o.Lk)("label",{for:"aspectLock"},"Aspect Lock:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"checkbox",id:"aspectLock","onUpdate:modelValue":t[12]||(t[12]=e=>c.value=e),onChange:t[13]||(t[13]=t=>e.$emit("update:aspect-lock",c.value))},null,544),[[a.lH,c.value]]),t[29]||(t[29]=(0,o.Lk)("br",null,null,-1)),t[30]||(t[30]=(0,o.Lk)("label",{for:"aspectCorrection"},"Aspect Ratio Correction:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"range",id:"aspectCorrection","onUpdate:modelValue":t[14]||(t[14]=e=>p.value=e),min:"0.1",max:"2",step:"0.01",onChange:t[15]||(t[15]=t=>e.$emit("update:aspect-ratio-correction",p.value))},null,544),[[a.Jo,p.value,void 0,{number:!0}]]),(0,o.Lk)("span",null,(0,b.v_)(p.value),1),t[31]||(t[31]=(0,o.Lk)("span",{style:{color:"red"}},"* aspect ratio correction accounts for characters being more tall then wide.",-1))]))}});const y=w;var C=y,R=n(2188);const x={class:"convertion-content"},U={class:"settings-drawer"},_={class:"image-view"},K=["innerHTML"];var O=(0,o.pM)({__name:"ConverterView",setup(e){const t=(0,k.KR)(null),n=(0,k.KR)(0),r=(0,k.KR)(10),l=(0,k.KR)(""),u=(0,k.KR)("standard"),i=(0,k.KR)(200),s=(0,k.KR)(100),c=(0,k.KR)(!0),p=(0,k.KR)(!1),v=(0,k.KR)(1),d=(0,k.KR)(1),h=(0,k.KR)(.55);async function f(e){try{const t=new Uint8Array(e),n=R.UD(t),a=(new TextDecoder).decode(n),o=JSON.parse(a);return m(o)}catch(t){throw console.error("Decompression error:",t),t}}function m(e){if(!e.rows||!Array.isArray(e.rows))throw new Error("Invalid RLE data structure - missing rows array");const t=[];for(let n=0;n<e.rows.length;n++){const a=e.rows[n],o=[];if(Array.isArray(a)){for(const e of a)if(e&&"number"===typeof e.count&&e.pixel)for(let t=0;t<e.count;t++)o.push(e.pixel);else console.error("Invalid RLE entry:",e);t.push(o)}else console.error("Invalid row at index",n,":",a)}return t}const g=e=>{const a=e.target.files;let o=!0;if(a&&a.length>0){t.value=a[0];const e=new Image,r=URL.createObjectURL(a[0]);e.src=r,e.onload=()=>{n.value=e.naturalWidth/e.naturalHeight,o=e.naturalWidth>=e.naturalHeight,URL.revokeObjectURL(r),i.value=200,s.value=100,w(o)},e.onerror=()=>{URL.revokeObjectURL(r)}}},L=(e,t)=>{"height"===e?(s.value=t,w(!1)):"width"===e?i.value=t:"aspectRatioCorrection"===e&&(h.value=t),w(!0)},w=e=>{c.value&&(e?s.value=Math.round(i.value/n.value*h.value):i.value=Math.round(s.value*n.value/h.value))},y=async()=>{if(t.value)try{l.value="";let e="";"standard"===u.value?e=" .:-=+*#%@":"simple"===u.value?e=" .-*#@":"complex"===u.value&&(e=" .Ê¼`^,:;Iil!i><~+_-?][}{1)(|/tfrjxnuvcxzYXUJCLQ0OZmwpqbdkhao*#MW&8%B@$");const n=new FormData;n.append("image",t.value),n.append("config",JSON.stringify({character_set:e.split(""),output_width:i.value,output_height:s.value,brightness_factor:v.value,contrast_factor:d.value,is_color:p.value,aspect_ratio_correction:h.value}));const a=await fetch("https://meerkat-flowing-blatantly.ngrok-free.app/convert-image",{method:"POST",body:n});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);let o;const r=a.headers.get("content-type"),c=a.headers.get("x-compression");if("application/octet-stream"===r||c&&c.startsWith("rle-gzip")){const e=await a.arrayBuffer();o=await f(e)}else{if(!r||!r.includes("application/json"))throw new Error(`Unexpected response format. Content-Type: ${r}`);o=await a.json()}if(!o||!Array.isArray(o)||0===o.length)throw new Error("Invalid ASCII grid received from server");l.value=o.map((e=>e.map((e=>{if(p.value&&e.rgb){const[t,n,a]=e.rgb;return`<span style="color: rgb(${t},${n},${a})">${e.ch}</span>`}return e.ch})).join(""))).join("<br>")}catch(e){console.error("Conversion error:",e),alert(`Conversion failed: ${e.message}`)}else alert("Please first upload an image.")};return(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[t[10]||(t[10]=(0,o.Lk)("h1",null,"Convert Here",-1)),(0,o.Lk)("div",x,[(0,o.Lk)("div",U,[(0,o.bF)(C,{width:i.value,height:s.value,"onUpdate:charSet":t[0]||(t[0]=e=>u.value=e),"onUpdate:width":t[1]||(t[1]=e=>L("width",e)),"onUpdate:height":t[2]||(t[2]=e=>L("height",e)),"onUpdate:aspectLock":t[3]||(t[3]=e=>c.value=e),"onUpdate:isColour":t[4]||(t[4]=e=>p.value=e),"onUpdate:brightness":t[5]||(t[5]=e=>v.value=e),"onUpdate:contrast":t[6]||(t[6]=e=>d.value=e),"onUpdate:aspectRatioCorrection":t[7]||(t[7]=e=>L("aspectRatioCorrection",e))},null,8,["width","height"])]),(0,o.Lk)("div",_,[(0,o.Lk)("input",{style:{color:"white"},type:"file",onChange:g},null,32),(0,o.Lk)("button",{type:"submit",onClick:y},"Convert"),t[9]||(t[9]=(0,o.Lk)("label",{for:"fontSize"},"Zoom: ",-1)),(0,o.bo)((0,o.Lk)("input",{type:"range",id:"fontSize","onUpdate:modelValue":t[8]||(t[8]=e=>r.value=e),min:"2",max:"30",step:"1"},null,512),[[a.Jo,r.value,void 0,{number:!0}]]),(0,o.Lk)("span",null,(0,b.v_)(r.value)+"px",1),(0,o.Lk)("pre",{style:(0,b.Tr)({fontSize:`${r.value}px`}),class:"asciiArt",innerHTML:l.value},null,12,K)])])],64))}});const $=O;var A=$;const S=[{path:"/",name:"home",component:g},{path:"/converter",name:"converter",component:A}],j=(0,v.aE)({history:(0,v.LA)("/image-to-ascii/"),routes:S});var E=j;(0,a.Ef)(p).use(E).mount("#app")}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,r){if(!a){var l=1/0;for(c=0;c<e.length;c++){a=e[c][0],o=e[c][1],r=e[c][2];for(var u=!0,i=0;i<a.length;i++)(!1&r||l>=r)&&Object.keys(n.O).every((function(e){return n.O[e](a[i])}))?a.splice(i--,1):(u=!1,r<l&&(l=r));if(u){e.splice(c--,1);var s=o();void 0!==s&&(t=s)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,o,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,r,l=a[0],u=a[1],i=a[2],s=0;if(l.some((function(t){return 0!==e[t]}))){for(o in u)n.o(u,o)&&(n.m[o]=u[o]);if(i)var c=i(n)}for(t&&t(a);s<l.length;s++)r=l[s],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504],(function(){return n(963)}));a=n.O(a)})();
//# sourceMappingURL=app.19689d55.js.map